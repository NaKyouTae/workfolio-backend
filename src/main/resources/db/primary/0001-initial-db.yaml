databaseChangeLog:
  - changeSet:
      id: 1
      author: na_kyutae
      changes:
        - createTable:
            tableName: worker
            columns:
              - column:
                  name: id
                  type: VARCHAR(16)
                  constraints:
                    primaryKey: true
                    nullable: false
              - column:
                  name: name
                  type: VARCHAR(256)
                  constraints:
                    nullable: false
              - column:
                  name: nick_name
                  type: VARCHAR(512)
                  constraints:
                    nullable: true
                    unique: true
              - column:
                  name: created_at
                  type: TIMESTAMP
                  defaultValueComputed: CURRENT_TIMESTAMP
                  constraints:
                    nullable: false
              - column:
                  name: updated_at
                  type: TIMESTAMP
                  defaultValueComputed: CURRENT_TIMESTAMP
                  constraints:
                    nullable: false
        - createIndex:
            columns:
              - column:
                  name: name
            indexName: idx_worker_name
            tableName: worker
        - createIndex:
            columns:
              - column:
                  name: nick_name
            indexName: idx_worker_nick_name
            tableName: worker
            unique: true

        - createTable:
            tableName: record_group
            columns:
              - column:
                  name: id
                  type: VARCHAR(16)
                  constraints:
                    primaryKey: true
                    nullable: false
              - column:
                  name: title
                  type: VARCHAR(256)
                  constraints:
                    nullable: false
              - column:
                  name: color
                  type: VARCHAR(128)
                  constraints:
                    nullable: false
              - column:
                  name: is_public
                  type: BOOLEAN
                  constraints:
                    nullable: false
              - column:
                  name: public_id
                  type: VARCHAR(16)
                  constraints:
                    nullable: false
                    unique: true
              - column:
                  name: priority
                  type: BIGINT
                  constraints:
                    nullable: false
              - column:
                  name: worker_id
                  type: VARCHAR(16)
                  constraints:
                    nullable: false
              - column:
                  name: created_at
                  type: TIMESTAMP
                  defaultValueComputed: CURRENT_TIMESTAMP
                  constraints:
                    nullable: false
              - column:
                  name: updated_at
                  type: TIMESTAMP
                  defaultValueComputed: CURRENT_TIMESTAMP
                  constraints:
                    nullable: false
        - createIndex:
            columns:
              - column:
                  name: public_id
            indexName: idx_record_group_public_id
            tableName: record_group

        - createTable:
            tableName: record
            columns:
              - column:
                  name: id
                  type: VARCHAR(16)
                  constraints:
                    primaryKey: true
                    nullable: false
              - column:
                  name: title
                  type: VARCHAR(256)
                  constraints:
                    nullable: false
              - column:
                  name: type
                  type: VARCHAR(128)
                  constraints:
                    nullable: false
              - column:
                  name: description
                  type: TEXT
                  constraints:
                    nullable: false
              - column:
                  name: started_at
                  type: TIMESTAMP
                  constraints:
                    nullable: false
              - column:
                  name: ended_at
                  type: TIMESTAMP
                  constraints:
                    nullable: true
              - column:
                  name: worker_id
                  type: VARCHAR(16)
                  constraints:
                    nullable: false
              - column:
                  name: record_group_id
                  type: VARCHAR(16)
                  constraints:
                    nullable: false
              - column:
                  name: created_at
                  type: TIMESTAMP
                  defaultValueComputed: CURRENT_TIMESTAMP
                  constraints:
                    nullable: false
              - column:
                  name: updated_at
                  type: TIMESTAMP
                  defaultValueComputed: CURRENT_TIMESTAMP
                  constraints:
                    nullable: false
        - createIndex:
            columns:
              - column:
                  name: title
            indexName: idx_record_title
            tableName: record
        - createIndex:
            columns:
              - column:
                  name: record_group_id
            indexName: idx_record_record_group_id
            tableName: record
        - createIndex:
            columns:
              - column:
                  name: record_group_id
              - column:
                  name: started_at
            indexName: idx_record_record_group_id_started_at
            tableName: record

        - createTable:
            tableName: worker_record_group
            columns:
              - column:
                  name: id
                  type: BIGINT
                  autoIncrement: true
                  constraints:
                    primaryKey: true
                    nullable: false
              - column:
                  name: public_id
                  type: VARCHAR(256)
                  constraints:
                    nullable: false
                    unique: true
              - column:
                  name: worker_id
                  type: VARCHAR(16)
                  constraints:
                    nullable: false
              - column:
                  name: record_group_id
                  type: VARCHAR(16)
                  constraints:
                    nullable: false
              - column:
                  name: created_at
                  type: TIMESTAMP
                  defaultValueComputed: CURRENT_TIMESTAMP
                  constraints:
                    nullable: false
              - column:
                  name: updated_at
                  type: TIMESTAMP
                  defaultValueComputed: CURRENT_TIMESTAMP
                  constraints:
                    nullable: false
        - createIndex:
            columns:
              - column:
                  name: public_id
            indexName: idx_record_group_public_id
            tableName: worker_record_group
        - createIndex:
            columns:
              - column:
                  name: worker_id
            indexName: idx_record_group_worker_id
            tableName: worker_record_group
        - createIndex:
            columns:
              - column:
                  name: record_group_id
            indexName: idx_record_group_record_group_id
            tableName: worker_record_group
        - createIndex:
            columns:
              - column:
                  name: worker_id
              - column:
                  name: record_group_id
            indexName: idx_record_group_worker_id_record_group_id
            tableName: worker_record_group

        - createTable:
            tableName: company
            columns:
              - column:
                  name: id
                  type: VARCHAR(16)
                  constraints:
                    primaryKey: true
                    nullable: false
              - column:
                  name: name
                  type: VARCHAR(256)
                  constraints:
                    nullable: false
              - column:
                  name: started_at
                  type: TIMESTAMP
                  constraints:
                    nullable: false
              - column:
                  name: ended_at
                  type: TIMESTAMP
                  constraints:
                    nullable: true
              - column:
                  name: is_working
                  type: BOOLEAN
                  constraints:
                    nullable: false
              - column:
                  name: worker_id
                  type: VARCHAR(16)
                  constraints:
                    nullable: false
              - column:
                  name: created_at
                  type: TIMESTAMP
                  defaultValueComputed: CURRENT_TIMESTAMP
                  constraints:
                    nullable: false
              - column:
                  name: updated_at
                  type: TIMESTAMP
                  defaultValueComputed: CURRENT_TIMESTAMP
                  constraints:
                    nullable: false
        - createIndex:
            columns:
              - column:
                  name: name
            indexName: idx_company_name
            tableName: company
            unique: true
        - createIndex:
            columns:
              - column:
                  name: worker_id
            indexName: idx_company_worker_id
            tableName: company

        - createTable:
            tableName: salary
            columns:
              - column:
                  name: id
                  type: VARCHAR(16)
                  constraints:
                    primaryKey: true
                    nullable: false
              - column:
                  name: amount
                  type: BIGINT
                  constraints:
                    nullable: false
              - column:
                  name: started_at
                  type: TIMESTAMP
                  constraints:
                    nullable: false
              - column:
                  name: ended_at
                  type: TIMESTAMP
                  constraints:
                    nullable: true
              - column:
                  name: company_id
                  type: VARCHAR(16)
                  constraints:
                    nullable: false
              - column:
                  name: created_at
                  type: TIMESTAMP
                  defaultValueComputed: CURRENT_TIMESTAMP
                  constraints:
                    nullable: false
              - column:
                  name: updated_at
                  type: TIMESTAMP
                  defaultValueComputed: CURRENT_TIMESTAMP
                  constraints:
                    nullable: false
        - createIndex:
            columns:
              - column:
                  name: amount
            indexName: idx_salary_amount
            tableName: salary
        - createIndex:
            columns:
              - column:
                  name: company_id
            indexName: idx_salary_company_id
            tableName: salary

        - createTable:
            tableName: position
            columns:
              - column:
                  name: id
                  type: VARCHAR(16)
                  constraints:
                    primaryKey: true
                    nullable: false
              - column:
                  name: name
                  type: VARCHAR(256)
                  constraints:
                    nullable: false
              - column:
                  name: started_at
                  type: TIMESTAMP
                  constraints:
                    nullable: false
              - column:
                  name: ended_at
                  type: TIMESTAMP
                  constraints:
                    nullable: true
              - column:
                  name: company_id
                  type: VARCHAR(16)
                  constraints:
                    nullable: false
              - column:
                  name: created_at
                  type: TIMESTAMP
                  defaultValueComputed: CURRENT_TIMESTAMP
                  constraints:
                    nullable: false
              - column:
                  name: updated_at
                  type: TIMESTAMP
                  defaultValueComputed: CURRENT_TIMESTAMP
                  constraints:
                    nullable: false
        - createIndex:
            columns:
              - column:
                  name: name
            indexName: idx_position_name
            tableName: position
            unique: true
        - createIndex:
            columns:
              - column:
                  name: company_id
            indexName: idx_position_company_id
            tableName: position

        - createTable:
            tableName: educations
            columns:
              - column:
                  name: id
                  type: VARCHAR(16)
                  constraints:
                    primaryKey: true
                    nullable: false
              - column:
                  name: name
                  type: VARCHAR(256)
                  constraints:
                    nullable: false
              - column:
                  name: started_at
                  type: TIMESTAMP
                  constraints:
                    nullable: false
              - column:
                  name: ended_at
                  type: TIMESTAMP
                  constraints:
                    nullable: true
              - column:
                  name: agency
                  type: VARCHAR(256)
                  constraints:
                    nullable: false
              - column:
                  name: worker_id
                  type: VARCHAR(16)
                  constraints:
                    nullable: false
              - column:
                  name: created_at
                  type: TIMESTAMP
                  defaultValueComputed: CURRENT_TIMESTAMP
                  constraints:
                    nullable: false
              - column:
                  name: updated_at
                  type: TIMESTAMP
                  defaultValueComputed: CURRENT_TIMESTAMP
                  constraints:
                    nullable: false
        - createIndex:
            columns:
              - column:
                  name: name
            indexName: idx_educations_name
            tableName: educations
            unique: true
        - createIndex:
            columns:
              - column:
                  name: worker_id
            indexName: idx_educations_worker_id
            tableName: educations

        - createTable:
            tableName: degrees
            columns:
              - column:
                  name: id
                  type: VARCHAR(16)
                  constraints:
                    primaryKey: true
                    nullable: false
              - column:
                  name: name
                  type: VARCHAR(256)
                  constraints:
                    nullable: false
              - column:
                  name: major
                  type: VARCHAR(1028)
                  constraints:
                    nullable: false
              - column:
                  name: started_at
                  type: TIMESTAMP
                  constraints:
                    nullable: false
              - column:
                  name: ended_at
                  type: TIMESTAMP
                  constraints:
                    nullable: true
              - column:
                  name: worker_id
                  type: VARCHAR(16)
                  constraints:
                    nullable: false
              - column:
                  name: created_at
                  type: TIMESTAMP
                  defaultValueComputed: CURRENT_TIMESTAMP
                  constraints:
                    nullable: false
              - column:
                  name: updated_at
                  type: TIMESTAMP
                  defaultValueComputed: CURRENT_TIMESTAMP
                  constraints:
                    nullable: false
        - createIndex:
            columns:
              - column:
                  name: name
            indexName: idx_degrees_name
            tableName: degrees
            unique: true
        - createIndex:
            columns:
              - column:
                  name: worker_id
            indexName: idx_degrees_worker_id
            tableName: degrees

        - createTable:
            tableName: certifications
            columns:
              - column:
                  name: id
                  type: VARCHAR(16)
                  constraints:
                    primaryKey: true
                    nullable: false
              - column:
                  name: name
                  type: VARCHAR(256)
                  constraints:
                    nullable: false
              - column:
                  name: number
                  type: VARCHAR(1028)
                  constraints:
                    nullable: false
              - column:
                  name: issuer
                  type: VARCHAR(1028)
                  constraints:
                    nullable: false
              - column:
                  name: issued_at
                  type: TIMESTAMP
                  constraints:
                    nullable: false
              - column:
                  name: expiration_period
                  type: TIMESTAMP
                  constraints:
                    nullable: true
              - column:
                  name: worker_id
                  type: VARCHAR(16)
                  constraints:
                    nullable: false
              - column:
                  name: created_at
                  type: TIMESTAMP
                  defaultValueComputed: CURRENT_TIMESTAMP
                  constraints:
                    nullable: false
              - column:
                  name: updated_at
                  type: TIMESTAMP
                  defaultValueComputed: CURRENT_TIMESTAMP
                  constraints:
                    nullable: false
        - createIndex:
            columns:
              - column:
                  name: name
            indexName: idx_certifications_name
            tableName: certifications
            unique: true
        - createIndex:
            columns:
              - column:
                  name: worker_id
            indexName: idx_certifications_worker_id
            tableName: certifications

        - createTable:
            tableName: account
            columns:
              - column:
                  name: id
                  type: VARCHAR(16)
                  constraints:
                    primaryKey: true
                    nullable: false
              - column:
                  name: type
                  type: VARCHAR(256)
                  constraints:
                    nullable: false
              - column:
                  name: email
                  type: VARCHAR(256)
                  constraints:
                    nullable: true
              - column:
                  name: provider_id
                  type: VARCHAR(518)
                  constraints:
                    nullable: false
                    unique: true
              - column:
                  name: worker_id
                  type: VARCHAR(16)
                  constraints:
                    nullable: false
              - column:
                  name: created_at
                  type: TIMESTAMP
                  defaultValueComputed: CURRENT_TIMESTAMP
                  constraints:
                    nullable: false
              - column:
                  name: updated_at
                  type: TIMESTAMP
                  defaultValueComputed: CURRENT_TIMESTAMP
                  constraints:
                    nullable: false
        - createIndex:
            columns:
              - column:
                  name: type
            indexName: idx_account_type
            tableName: account
        - createIndex:
            columns:
              - column:
                  name: provider_id
            indexName: idx_account_provider_id
            tableName: account

        - createTable:
            tableName: job_search
            columns:
              - column:
                  name: id
                  type: VARCHAR(16)
                  constraints:
                    primaryKey: true
                    nullable: false
              - column:
                  name: title
                  type: VARCHAR(1024)
                  constraints:
                    nullable: true
              - column:
                  name: started_at
                  type: TIMESTAMP
                  constraints:
                    nullable: false
              - column:
                  name: ended_at
                  type: TIMESTAMP
                  constraints:
                    nullable: true
              - column:
                  name: memo
                  type: TEXT
                  constraints:
                    nullable: true
              - column:
                  name: prev_company_id
                  type: VARCHAR(16)
                  constraints:
                    nullable: false
              - column:
                  name: next_company_id
                  type: VARCHAR(16)
                  constraints:
                    nullable: true
              - column:
                  name: worker_id
                  type: VARCHAR(16)
                  constraints:
                    nullable: false
              - column:
                  name: created_at
                  type: TIMESTAMP
                  defaultValueComputed: CURRENT_TIMESTAMP
                  constraints:
                    nullable: false
              - column:
                  name: updated_at
                  type: TIMESTAMP
                  defaultValueComputed: CURRENT_TIMESTAMP
                  constraints:
                    nullable: false
        - createIndex:
            columns:
              - column:
                  name: worker_id
              - column:
                  name: started_at
              - column:
                  name: ended_at
            indexName: idx_job_search_worker_id_started_at_ended_at
            tableName: job_search

        - createTable:
            tableName: job_search_company
            columns:
              - column:
                  name: id
                  type: VARCHAR(16)
                  constraints:
                    primaryKey: true
                    nullable: false
              - column:
                  name: name
                  type: VARCHAR(1024)
                  constraints:
                    nullable: false
              - column:
                  name: status
                  type: VARCHAR(128)
                  constraints:
                    nullable: false
              - column:
                  name: applied_at
                  type: TIMESTAMP
                  constraints:
                    nullable: false
              - column:
                  name: closed_at
                  type: TIMESTAMP
                  constraints:
                    nullable: false
              - column:
                  name: ended_at
                  type: TIMESTAMP
                  constraints:
                    nullable: true
              - column:
                  name: link
                  type: TEXT
                  constraints:
                    nullable: true
              - column:
                  name: job_search_id
                  type: VARCHAR(16)
                  constraints:
                    nullable: false
              - column:
                  name: created_at
                  type: TIMESTAMP
                  defaultValueComputed: CURRENT_TIMESTAMP
                  constraints:
                    nullable: false
              - column:
                  name: updated_at
                  type: TIMESTAMP
                  defaultValueComputed: CURRENT_TIMESTAMP
                  constraints:
                    nullable: false
        - createIndex:
            columns:
              - column:
                  name: job_search_id
            indexName: idx_job_search_company_job_search_id
            tableName: job_search_company
